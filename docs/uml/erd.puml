@startuml
title ERD - Sweet Heaven Bakery – Media Hub

hide circle
skinparam entity {
  BackgroundColor #FFFDF6
  BorderColor #D9A441
}

entity "USER" as USER {
  * user_id : int <<PK>>
  --
  full_name       : varchar
  email           : varchar
  role            : varchar  ' ADMIN / EDITOR / OPERATOR
  password_hash   : varchar
  created_at      : datetime
}

entity "CHANNEL" as CHANNEL {
  * channel_id : int <<PK>>
  --
  name        : varchar
  code        : varchar   ' FACEBOOK / ZALO / WEBSITE / TIKTOK / YOUTUBE
  description : varchar
  is_active   : boolean
}

entity "POST" as POST {
  * post_id     : int <<PK>>
  --
  channel_id   : int <<FK>>
  author_id    : int <<FK>>
  title        : varchar
  content      : text
  status       : varchar  ' Draft / Approved / Scheduled / Published
  scheduled_at : datetime
  published_at : datetime
  created_at   : datetime
  updated_at   : datetime
}

entity "WEBHOOK_EVENT" as WEBHOOK_EVENT {
  * event_id         : int <<PK>>
  --
  external_event_id  : varchar
  channel_id         : int <<FK>>
  post_id            : int <<FK>>
  event_type         : varchar   ' PUBLISHED / MESSAGE / ...
  payload_json       : text
  received_at        : datetime
}

entity "FEEDBACK" as FEEDBACK {
  * feedback_id   : int <<PK>>
  --
  customer_name   : varchar
  message         : text
  created_at      : datetime
}

entity "BRANCH" as BRANCH {
  * branch_id     : int <<PK>>
  --
  name           : varchar
  address        : varchar
  phone          : varchar
  open_hours     : varchar
  is_active      : boolean
}

' Quan hệ
USER ||--o{ POST : "author of"
CHANNEL ||--o{ POST : "has posts"
CHANNEL ||--o{ WEBHOOK_EVENT : "events on"
POST ||--o{ WEBHOOK_EVENT : "generated by"

@enduml
